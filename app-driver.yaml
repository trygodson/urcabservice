runtime: nodejs20
instance_class: F2
env: standard
service: driver-api

# Build configuration for driver_api
build_env_variables:
  BUILD_COMMAND: 'npm run build && npm run driver && npm run dstart'

# Environment variables
env_variables:
  NODE_ENV: production
  DRIVER_HTTP_PORT: 3012

  # JWT Configuration for Driver API
  JWT_DSECRET: jsuhjshbkjhgkvjghvvsjhgsjh
  JWT_EXPIRATION: 48

  # Database Configuration
  MONGODB_URI: mongodb+srv://godson:Password123@cluster0.lb5lhh7.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0

  SYNCHRONIZE: false

  # Google OAuth Configuration
  G_CLIENTID: 602105045450-rpteua811pb7up0pr57nv4apmebn26sh.apps.googleusercontent.com
  G_CLIENTSECRET: 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

  # Firebase Configuration
  FIREBASE_PROJECT_ID: urcabpassenger-demo-50fb5
  FIREBASE_CLIENT_EMAIL: firebase-adminsdk-fbsvc@urcabpassenger-demo-50fb5.iam.gserviceaccount.com
  FIREBASE_PRIVATE_KEY: -----BEGIN PRIVATE KEY-----\nMIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDNC1fMXMrZt9BV\n+1FlpQhHG7rEiUeIqkBvp+gUmXXP5WQv3Jp4GERFemIA3kK1B3C+QyEHOmtkfZgB\naDHvDj+Sp/ybHlAGeYYn7zCSwJu/y3eppj5NpzTf9AOdHJOjiBbib7/11C4/ZjMZ\nYi+nNO3oqRq8wEnJ70khRRuYiQ0P5S4Dgm3Teu8TCXmtZW8U/v18S0DrC9mJ5aLE\nMpSGrhac2wTbgsbA1LyRjjRTcrwshaCWj5FC8ZGYFVt6bR/2AM/m8wtADG4H5gR7\n6bwstxFwaahafmjDQWx6wCTZ4WEAmEOnKWzEQhwhFWEH3KC3E9FnI9QepFtQqKJ+\n9etk8EzTAgMBAAECggEAM5K6zqg4TXKycC36VzqfTmNnIq/00icgdfUhpqzCuTvV\na0Rthe90nJUfuWAuHyJz9SclU5AaGviMFy6CAMLwso6WNt30+uvuFnVPHlpb0m32\n9zDdUuLPpdTWY9ogOG2uc93vxoFL8J5gE+5iVgg2HuMJ2pfy91u8ZSXgvwkZw/lJ\nUAAOnwFHk9g4fzpSfRM0Ld4rcHSGAoAdrk8oIQtzllk9R6pTxQ7mDEWEb6ZyPICm\nqUiQ/fGr0UJRFZYjqRx/yPZu+aFtSXSPvZCY0WahHX0xme0SVLI5xWrY5aYBPeTs\nKFDc5x3fsiN8ZZsbGJWmQxd6Gz0DeukQwvfX0af44QKBgQD7JY1JBbwiuK77D8yY\nxXUr1qh0qX1SAG4Nb3R+zo65+cWhUoJYhRuBwG+AQc+tnYSHhHdF4lE66eLG2pSf\nwmP4qTVh/8HGzvSMnNCAHBKRVKJ3B1NNTZVzVwUlc1syJdvyTu6PqyAoe++mEg34\nuK1kHFQlGbU9V9Jx7IWjmfpGBwKBgQDRAbfKLxcYD5ApZPYNy0G9QTZQiGAGVz2P\nRIQWlfZqFt0s2tIoyq8uGFEyV6ob/jfG+qAOJkDkxHc/9IdKGyJy5K/u8yGbr3Dr\n8TuM6lKWCQs6qBuygpWSReMnZgtTQkHoZz9RQ7RTrwmM2Xzk8GlNaaiHZ/flYZBe\n+cxcxDFv1QKBgQDAQCa/V1yFV8ra9WUxLTZcsJ2TcIs2Uo3sSv1qdMRdKQ5YR8jv\n6jT8RksUa0yHIqVo98Y2AOEdsByhDIHpKe1NVHpA4n97qMEbQo95AgRUq+0SINFr\nw5A8EsklugB9iu2rtzB3Wg/r7bOt9PQtCXHxyJ3BKMTMiIXYH67NZfln0QKBgQCM\n3UWLpRVBiCu3Wm5jeZxC+5Kp0GA3pdC9oIYN2uCLPAGxW4HNMF3FCWqgLWlfGIVr\nPDtnjeyqwqdEmYAdOBCNswfIWmFKVoIa4ykpnjwvFsVUsTyJoW1BeozQXvw/Dybw\nhbWtBZ6h0BT1sxd0DXxLSmzlZfMzy//LozxTQX+4SQKBgQCJstkpkpLln7RRLSFG\neM6SpPxV5DFyCqOo+ignv2gVN0N4wJS5gA6rwRB2q2m6UtPXx6tTOsC1CLAmzF7F\nNdL9/nHvcaIbua8HpwO1s1SnLYLRc6RY8Omq6b7vU1sLL7DdkCpQCIZWgv8v/YfM\niOciquGA4nmcFdlfUznhFI3oMQ==\n-----END PRIVATE KEY-----\n

  # Other API URLs
  # USER_API_URL: https://your-project-id.appspot.com
  # ADMIN_API_URL: https://admin-api-dot-your-project-id.appspot.com

# Automatic scaling
automatic_scaling:
  min_instances: 1
  max_instances: 15
  target_cpu_utilization: 0.6

# Health check
readiness_check:
  path: '/health'
  check_interval_sec: 5
  timeout_sec: 4
  failure_threshold: 2
  success_threshold: 2

liveness_check:
  path: '/health'
  check_interval_sec: 30
  timeout_sec: 4
  failure_threshold: 4
  success_threshold: 2

# Network settings
network:
  session_affinity: true

# Skip files that don't need to be uploaded
skip_files:
  - ^(.*/)?#.*#$
  - ^(.*/)?.*~$
  - ^(.*/)?.*\.py[co]$
  - ^(.*/)?.*/RCS/.*$
  - ^(.*/)?\..*$
  - ^(.*/)?node_modules/.*$
  - ^(.*/)?coverage/.*$
  - ^(.*/)?\.nyc_output/.*$
  - ^(.*/)?dist/(?!apps/driver_api/).*$
